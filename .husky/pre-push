#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "Running Prettier check…"
npm run -s format:check || {
  echo "❌ Prettier check failed. Run: npm run format"
  exit 1
}

if [ -f "package.json" ] && cat package.json | grep -q "\"test\""; then
  echo "Running tests…"
  npm test --silent || {
    echo "❌ Tests failed. Fix tests before pushing."
    exit 1
  }
fi

echo "✅ Pre-push checks passed."