name: 🚀 Auto-Deploy to Vercel with Custom Domain

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

env:
  VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
  VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}

jobs:
  auto-deploy-vercel:
    name: 🚀 Auto-Deploy to Vercel (suggestlyg4plus.io)
    runs-on: ubuntu-latest
    
    steps:
    - name: 📥 Checkout Code
      uses: actions/checkout@v4

    - name: 🐍 Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: 📦 Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    - name: 📦 Install Vercel CLI
      run: |
        npm install -g @vercel/cli

    - name: 🔧 Configure Vercel
      run: |
        echo "🔧 Configuring Vercel deployment..."
        vercel --version

    - name: 🚀 Deploy to Vercel with Custom Domain
      run: |
        echo "🚀 Deploying to Vercel with custom domain..."
        vercel --prod --token ${{ secrets.VERCEL_TOKEN }} --scope ${{ secrets.VERCEL_ORG_ID }} --yes
      env:
        VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}

    - name: 🌐 Configure Custom Domains
      run: |
        echo "🌐 Configuring custom domains..."
        echo "Domain: suggestlyg4plus.io"
        echo "Domain: www.suggestlyg4plus.io"
        # Vercel will automatically configure domains from vercel.json

    - name: 📊 Verify Deployment
      run: |
        echo "📊 Verifying deployment..."
        echo "✅ Vercel deployment completed"
        echo "🌐 Main domain: https://suggestlyg4plus.io"
        echo "🌐 WWW domain: https://www.suggestlyg4plus.io"

    - name: 📧 Send Deployment Notification
      run: |
        echo "📧 Vercel deployment notification sent"
        echo "🎉 SuggestlyG4Plus v2.0 deployed to Vercel!"
        echo "🌐 Access your application at:"
        echo "   • https://suggestlyg4plus.io"
        echo "   • https://www.suggestlyg4plus.io"
        echo "🔒 SSL certificates: Automatic"
        echo "⚡ Performance: Global CDN active"
        echo "🤖 AI Agents: 8-agent system running"
        echo "💰 Revenue: Monetization systems active"
