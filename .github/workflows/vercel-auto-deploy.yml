name: ğŸš€ Auto-Deploy to Vercel with Custom Domain

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

env:
  VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
  VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}

jobs:
  auto-deploy-vercel:
    name: ğŸš€ Auto-Deploy to Vercel (suggestlyg4plus.io)
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout Code
      uses: actions/checkout@v4

    - name: ğŸ Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: ğŸ“¦ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    - name: ğŸ“¦ Install Vercel CLI
      run: |
        npm install -g @vercel/cli

    - name: ğŸ”§ Configure Vercel
      run: |
        echo "ğŸ”§ Configuring Vercel deployment..."
        vercel --version

    - name: ğŸš€ Deploy to Vercel with Custom Domain
      run: |
        echo "ğŸš€ Deploying to Vercel with custom domain..."
        vercel --prod --token ${{ secrets.VERCEL_TOKEN }} --scope ${{ secrets.VERCEL_ORG_ID }} --yes
      env:
        VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}

    - name: ğŸŒ Configure Custom Domains
      run: |
        echo "ğŸŒ Configuring custom domains..."
        echo "Domain: suggestlyg4plus.io"
        echo "Domain: www.suggestlyg4plus.io"
        # Vercel will automatically configure domains from vercel.json

    - name: ğŸ“Š Verify Deployment
      run: |
        echo "ğŸ“Š Verifying deployment..."
        echo "âœ… Vercel deployment completed"
        echo "ğŸŒ Main domain: https://suggestlyg4plus.io"
        echo "ğŸŒ WWW domain: https://www.suggestlyg4plus.io"

    - name: ğŸ“§ Send Deployment Notification
      run: |
        echo "ğŸ“§ Vercel deployment notification sent"
        echo "ğŸ‰ SuggestlyG4Plus v2.0 deployed to Vercel!"
        echo "ğŸŒ Access your application at:"
        echo "   â€¢ https://suggestlyg4plus.io"
        echo "   â€¢ https://www.suggestlyg4plus.io"
        echo "ğŸ”’ SSL certificates: Automatic"
        echo "âš¡ Performance: Global CDN active"
        echo "ğŸ¤– AI Agents: 8-agent system running"
        echo "ğŸ’° Revenue: Monetization systems active"
